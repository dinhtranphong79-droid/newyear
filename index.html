<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year 2026</title>
<style>
html, body { margin:0; padding:0; background:black; overflow:hidden; }
canvas { display:block; width:100%; height:100%; }
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let W,H;
function resize(){ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; }
resize();
window.addEventListener("resize", resize);

const rand=(a,b)=>Math.random()*(b-a)+a;

// ======================
// PARTICLE
// ======================
class Particle{
    constructor(x,y,color,type="spark"){
        this.x=x; this.y=y;
        this.color=color;
        this.type=type; // spark | text
        this.vx=0; this.vy=0;
        this.alpha=1; this.size=2; this.life=0;
        this.tx=0; this.ty=0; // dùng cho text
    }
    update(){
        this.life++;
        if(this.type==="spark"){
            this.x+=this.vx;
            this.y+=this.vy;
            this.vy+=0.05;
            this.size*=0.96;
            this.alpha*=0.96;
        } else if(this.type==="text"){
            this.x+=(this.tx-this.x)*0.08;
            this.y+=(this.ty-this.y)*0.08;
        }
    }
    draw(ctx){
        ctx.globalAlpha=this.alpha;
        ctx.fillStyle=this.color;
        ctx.fillRect(this.x,this.y,this.size,this.size);
        ctx.globalAlpha=1;
    }
}

// ======================
// PHÁO HOA HÌNH TRÒN
// ======================
function explodeCircle(x, y){
    const count = 400;
    const radius = rand(250,350);
    for(let i=0;i<count;i++){
        const angle=(i/count)*Math.PI*2;
        const speed=rand(radius/12,radius/10);
        const vx=Math.cos(angle)*speed;
        const vy=Math.sin(angle)*speed;
        let p=new Particle(x,y,`hsl(${rand(0,360)},100%,60%)`,"spark");
        p.vx=vx; p.vy=vy;
        particles.push(p);
    }
}

// ======================
// ROCKET
// ======================
class Rocket{
    constructor(x){
        this.x=x;
        this.y=H+50;
        this.peakY=rand(H*0.1,H*0.5);
        this.color=`hsl(${rand(0,360)},100%,60%)`;
        this.exploded=false;
    }
    update(){
        if(!this.exploded){
            this.y+=this.vy;
            this.vy = this.vy || rand(-12,-8);
            this.vy += 0.15; // gravity
            if(this.y<=this.peakY){
                this.explode();
            }
        }
    }
    explode(){
        this.exploded=true;
        explodeCircle(this.x,this.y);
    }
}
let rockets=[];

// ======================
// BẮN ROCKET
// ======================
function launchRocket(){
    const x = rand(W*0.1,W*0.9);
    rockets.push(new Rocket(x));
}

// ======================
// CHỮ 2 HÀNG
// ======================
function createTextParticles(text,yRatio,size){
    const off=document.createElement("canvas");
    const octx=off.getContext("2d");
    off.width=W; off.height=H;
    octx.fillStyle="#fff";
    octx.textAlign="center";
    octx.textBaseline="middle";
    octx.font=`900 ${size}px Arial`;
    octx.fillText(text,W/2,H*yRatio);
    const img=octx.getImageData(0,0,W,H).data;
    for(let y=0;y<H;y+=6){
        for(let x=0;x<W;x+=6){
            const i=(y*W+x)*4;
            if(img[i+3]>150){
                let p=new Particle(x,H+rand(50,200),`hsl(${rand(0,360)},100%,60%)`,"text");
                p.tx=x; p.ty=y;
                particles.push(p);
            }
        }
    }
}

// ======================
// ANIMATE
// ======================
let particles=[];
function animate(){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,W,H);

    // update rockets
    for(let i=0;i<rockets.length;i++){
        rockets[i].update();
        if(rockets[i].exploded) rockets.splice(i--,1);
    }

    // update particles
    for(let i=0;i<particles.length;i++){
        let p=particles[i];
        p.update();
        p.draw(ctx);
        if(p.life>150 && p.type!=="text") particles.splice(i--,1);
    }

    requestAnimationFrame(animate);
}
animate();

// ======================
// LẶP BẮN ROCKET
// ======================
let rocketInterval=setInterval(launchRocket,300);
setTimeout(()=>{ clearInterval(rocketInterval); },15000);

// ======================
// BẮN CHỮ 2 HÀNG
// ======================
setTimeout(()=>{ createTextParticles("HAPPY NEW YEAR",0.28,W*0.08); },15000);
setTimeout(()=>{ createTextParticles("2026",0.42,W*0.2); },16500);
</script>
</body>
</html>
