<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ðŸŽ† Happy New Year 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  background:black;
  overflow:hidden;
}
canvas{display:block;}
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize",resize);

/* ============ UTILS ============ */
const rand=(a,b)=>Math.random()*(b-a)+a;
const color=()=>`hsl(${rand(0,360)},100%,60%)`;

/* ============ FIREWORKS ============ */
let fireworks=[];
let intensity=0.012;

function launch(){
  fireworks.push({
    x:rand(canvas.width*0.1,canvas.width*0.9),
    y:canvas.height+20,
    vx:rand(-1.2,1.2),
    vy:-rand(12,18),
    g:0.35,
    exploded:false,
    type:Math.floor(rand(0,6)),
    parts:[]
  });
}

function explode(f){
  let count=Math.floor(rand(80,180));
  for(let i=0;i<count;i++){
    let a,s,vx,vy;
    switch(f.type){
      case 0: // circle
        a=Math.random()*Math.PI*2;
        s=rand(2,6);
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
      case 1: // star
        a=(Math.PI*2/5)*(i%5);
        s=rand(3,6);
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
      case 2: // spiral
        a=i*0.3; s=i*0.04;
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
      case 3: // rain
        a=Math.PI/2+rand(-0.3,0.3);
        s=rand(3,8);
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
      case 4: // flower
        a=Math.random()*Math.PI*2;
        s=rand(2,5)*(Math.sin(a*4));
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
      case 5: // double burst
        a=Math.random()*Math.PI*2;
        s=rand(2,7);
        vx=Math.cos(a)*s; vy=Math.sin(a)*s;
        break;
    }
    f.parts.push({x:f.x,y:f.y,vx,vy,life:rand(60,110),c:color()});
  }
  f.exploded=true;
}

function updateFireworks(){
  for(let i=fireworks.length-1;i>=0;i--){
    let f=fireworks[i];
    if(!f.exploded){
      f.x+=f.vx;
      f.y+=f.vy;
      f.vy+=f.g;
      if(f.vy>=-2) explode(f);
    }else{
      f.parts.forEach(p=>{
        p.x+=p.vx;
        p.y+=p.vy;
        p.vy+=0.05;
        p.life--;
      });
      f.parts=f.parts.filter(p=>p.life>0);
      if(!f.parts.length) fireworks.splice(i,1);
    }
  }
}

function drawFireworks(){
  fireworks.forEach(f=>{
    f.parts.forEach(p=>{
      ctx.fillStyle=p.c;
      ctx.fillRect(p.x,p.y,2,2);
    });
  });
}

/* ============ TEXT ============ */
let showText=false;
let textParts=[];

function createText(){
  textParts=[];
  const off=document.createElement("canvas");
  const o=off.getContext("2d");
  off.width=canvas.width;
  off.height=canvas.height;

  let fontSize=Math.min(canvas.width*0.1,canvas.height*0.18);
  o.font=`bold ${fontSize}px Arial`;
  o.textAlign="center";
  o.textBaseline="middle";
  o.fillStyle="white";
  o.fillText("HAPPY NEW YEAR 2026",canvas.width/2,canvas.height/2);

  let d=o.getImageData(0,0,off.width,off.height).data;
  for(let y=0;y<off.height;y+=6){
    for(let x=0;x<off.width;x+=6){
      if(d[(y*off.width+x)*4+3]>150){
        textParts.push({
          x:rand(0,canvas.width),
          y:canvas.height+rand(50,400),
          tx:x,ty:y,
          vx:0,vy:0,
          c:color()
        });
      }
    }
  }
}

function updateText(){
  textParts.forEach(p=>{
    p.vx+=(p.tx-p.x)*0.02;
    p.vy+=(p.ty-p.y)*0.02;
    p.vx*=0.85; p.vy*=0.85;
    p.x+=p.vx; p.y+=p.vy;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,2,2);
  });
}

/* ============ LOOP ============ */
function animate(){
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  intensity=Math.min(intensity+0.00002,0.09);
  if(Math.random()<intensity) launch();

  updateFireworks();
  drawFireworks();
  if(showText) updateText();

  requestAnimationFrame(animate);
}
animate();

/* â± 15s xuáº¥t hiá»‡n chá»¯ */
setTimeout(()=>{
  showText=true;
  createText();
},15000);
</script>

</body>
</html>
