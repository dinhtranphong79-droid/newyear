<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy New Year 2026</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
}

canvas {
  display: block;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let W, H;

// ====== CANH TỈ LỆ 9:16 ======
function resize() {
  const ratio = 9 / 16;
  let w = window.innerWidth;
  let h = window.innerHeight;

  if (w / h > ratio) {
    w = h * ratio;
  } else {
    h = w / ratio;
  }

  canvas.width = W = w;
  canvas.height = H = h;
}
window.addEventListener("resize", resize);
resize();

// ====== VẼ CHỮ ======
function drawText() {
  ctx.save();

  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  // Glow
  ctx.shadowColor = "#ffcc00";
  ctx.shadowBlur = 25;

  ctx.fillStyle = "#ffffff";
  ctx.font = `900 ${W * 0.085}px Arial`;
  ctx.fillText("HAPPY NEW YEAR", W / 2, H * 0.16);

  ctx.font = `900 ${W * 0.2}px Arial`;
  ctx.fillText("2026", W / 2, H * 0.3);

  ctx.restore();
}


// ====== PHÁO HOA ======
class Firework {
  constructor() {
    this.x = Math.random() * W;
    this.y = H + 20;
    this.targetY = H * (0.3 + Math.random() * 0.4);
    this.speed = 6 + Math.random() * 3;
    this.exploded = false;
    this.particles = [];
  }

  update() {
    if (!this.exploded) {
      this.y -= this.speed;
      if (this.y <= this.targetY) this.explode();
    } else {
      this.particles.forEach(p => p.update());
    }
  }

  draw() {
    if (!this.exploded) {
      ctx.fillStyle = "white";
      ctx.fillRect(this.x, this.y, 2, 6);
    } else {
      this.particles.forEach(p => p.draw());
    }
  }

  explode() {
    this.exploded = true;
    const shapes = ["circle", "star", "double", "spiral"];
    const shape = shapes[Math.floor(Math.random() * shapes.length)];
    const count = 80;

    for (let i = 0; i < count; i++) {
      let angle = (Math.PI * 2 / count) * i;
      this.particles.push(new Particle(this.x, this.y, angle, shape));
    }
  }
}

class Particle {
  constructor(x, y, angle, shape) {
    this.x = x;
    this.y = y;
    this.angle = angle;
    this.shape = shape;
    this.speed = 2 + Math.random() * 4;
    this.life = 60 + Math.random() * 30;
    this.color = `hsl(${Math.random() * 360},100%,60%)`;
  }

  update() {
    let vx = Math.cos(this.angle) * this.speed;
    let vy = Math.sin(this.angle) * this.speed;

    if (this.shape === "star") {
      vx *= Math.sin(this.life * 0.2);
      vy *= Math.cos(this.life * 0.2);
    }
    if (this.shape === "double") {
      vx *= 1.5;
      vy *= 0.7;
    }
    if (this.shape === "spiral") {
      this.angle += 0.15;
    }

    this.x += vx;
    this.y += vy;
    this.life--;
  }

  draw() {
    if (this.life <= 0) return;
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, 2, 2);
  }
}

let fireworks = [];

// ====== LOOP ======
function animate() {
ctx.fillStyle = "rgba(0,0,0,0.25)";
ctx.fillRect(0, 0, W, H);

// 1. Vẽ pháo hoa trước
fireworks.forEach(f => {
  f.update();
  f.draw();
});

// 2. Vẽ chữ SAU → chữ luôn sắc
drawText();


  if (Math.random() < 0.06) {
    fireworks.push(new Firework());
  }

  fireworks.forEach(f => {
    f.update();
    f.draw();
  });

  fireworks = fireworks.filter(f =>
    !f.exploded || f.particles.some(p => p.life > 0)
  );

  requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
