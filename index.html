<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ðŸŽ† Happy New Year 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  padding:0;
  background:black;
  overflow:hidden;
}
canvas{
  position:absolute;
  inset:0;
  margin:auto;
}
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

/* ========= 9:16 LOGIC ========= */
let W=720, H=1280, scale=1;

function resize(){
  const sw=innerWidth, sh=innerHeight;
  const ratio=9/16;

  if(sw/sh > ratio){
    H=sh;
    W=H*ratio;
  }else{
    W=sw;
    H=W/ratio;
  }

  scale=W/720;
  canvas.width=W;
  canvas.height=H;
  canvas.style.width=W+"px";
  canvas.style.height=H+"px";
}
resize();
addEventListener("resize",resize);

/* ========= UTILS ========= */
const rand=(a,b)=>Math.random()*(b-a)+a;
const color=()=>`hsl(${rand(0,360)},100%,60%)`;

/* ========= FIREWORKS ========= */
let fireworks=[];
let intensity=0.015;

function launch(){
  fireworks.push({
    x:rand(W*0.15,W*0.85),
    y:H+20,
    vx:rand(-1,1)*scale,
    vy:-rand(14,20)*scale,
    g:0.45*scale,
    exploded:false,
    type:Math.floor(rand(0,6)),
    parts:[]
  });
}

function explode(f){
  let n=rand(90,180);
  for(let i=0;i<n;i++){
    let a=Math.random()*Math.PI*2;
    let s=rand(2,6)*scale;
    f.parts.push({
      x:f.x,y:f.y,
      vx:Math.cos(a)*s,
      vy:Math.sin(a)*s,
      life:rand(60,110),
      c:color()
    });
  }
  f.exploded=true;
}

function updateFireworks(){
  for(let i=fireworks.length-1;i>=0;i--){
    let f=fireworks[i];
    if(!f.exploded){
      f.x+=f.vx;
      f.y+=f.vy;
      f.vy+=f.g;
      if(f.vy>=-2*scale) explode(f);
    }else{
      f.parts.forEach(p=>{
        p.x+=p.vx;
        p.y+=p.vy;
        p.vy+=0.06*scale;
        p.life--;
      });
      f.parts=f.parts.filter(p=>p.life>0);
      if(!f.parts.length) fireworks.splice(i,1);
    }
  }
}

function drawFireworks(){
  fireworks.forEach(f=>{
    f.parts.forEach(p=>{
      ctx.fillStyle=p.c;
      ctx.fillRect(p.x,p.y,2*scale,2*scale);
    });
  });
}

/* ========= TEXT ========= */
let showText=false;
let textParts=[];

function createText(){
  textParts=[];
  const off=document.createElement("canvas");
  off.width=W;
  off.height=H;
  const o=off.getContext("2d");

  let fontSize=W*0.12;
  o.font=`900 ${fontSize}px Arial`;
  o.textAlign="center";
  o.textBaseline="middle";
  o.fillStyle="white";
  o.fillText("HAPPY NEW YEAR",W/2,H/2-60*scale);
  o.fillText("2026",W/2,H/2+60*scale);

  let d=o.getImageData(0,0,W,H).data;
  for(let y=0;y<H;y+=6){
    for(let x=0;x<W;x+=6){
      if(d[(y*W+x)*4+3]>150){
        textParts.push({
          x:rand(0,W),
          y:H+rand(80,400),
          tx:x,ty:y,
          vx:0,vy:0,
          c:color()
        });
      }
    }
  }
}

function updateText(){
  textParts.forEach(p=>{
    p.vx+=(p.tx-p.x)*0.03;
    p.vy+=(p.ty-p.y)*0.03;
    p.vx*=0.8; p.vy*=0.8;
    p.x+=p.vx; p.y+=p.vy;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,2*scale,2*scale);
  });
}

/* ========= LOOP ========= */
function animate(){
  ctx.fillStyle="rgba(0,0,0,0.28)";
  ctx.fillRect(0,0,W,H);

  intensity=Math.min(intensity+0.00002,0.08);
  if(Math.random()<intensity) launch();

  updateFireworks();
  drawFireworks();
  if(showText) updateText();

  requestAnimationFrame(animate);
}
animate();

/* â± 15s hiá»‡n chá»¯ */
setTimeout(()=>{
  showText=true;
  createText();
},15000);
</script>

</body>
</html>
